\chapter{Introduction}
\label{ch1_intro}

Modern engineering design, and particularly aerospace design, has come to rely
heavily on optimization. Time and time again, the importance of fast and
reliable \gls{MDO} tools has been stressed in the literature. %TODO: cite
However most \gls{MDO} tools
have the downfall of being slow due to the multimodal nature of many
engineering design problems. Furthermore, these tools act like black boxes since
they provide point solutions without additional information about the design problem
such as sensitivities, which can provide important engineering insight.

In the \gls{CEG}, we seek to improve the engineering design process by
leveraging the mathematical guarantees and speed of convex optimization. Our primary
software product is GPkit, an
open-source, object-oriented software to help build \gls{GP}-compatible models and
interface with solvers. In much of our previous work
(\cite{gp_ac_design},\cite{SP_ac_design}, \cite{sp_engine}), we have demonstrated that
\gls{GP} is useful for certain kinds of optimization problems, but have yet to formalize why it
facilitates design.

The mathematical restrictions on the form of constraints remains the biggest
barrier in using convex programs for design. Firstly, I
aim to show that the form of the \gls{GP} actually facilitates the design
optimization process
and engineering understanding, rather than impeding it, through the disciplined use
of inequalities to express constraints. Furthermore, GPkit allows for the
monitoring of the boundedness of variables in a model, which facilitates the model
building process and allows engineers
to have properly conditioned models. Hence I will
pass on some of the expertise we have developed in the \gls{CEG} building
\gls{GP}-compatible models from general non-linear physical models.

Secondly, I aim to showcase the extensibility of \gls{GP}.
The formulation of the \gls{GP} as a 'bag of
constraints' instead of a hierarchical set of relations confers advantages
when trying to expand the fidelity and scope of models, especially in the
conceptual design stage. Furthermore, the solution to the dual of the \gls{GP}
provides optimal sensitivities which allow targeted efforts by engineers to
collaboratively improve models.

Finally, I will discuss the features specific to GPkit in facilitating
an engineering design process that is streamlined and collaborative, and is
compatible with modern engineering design methodologies. The modularity of the
models, as well as the ability to create vectorized models, variables and constraints
allows for a mission design approach that ensures that
requirements both at the sub-system and complete-system levels are satisfied.

I will discuss the features of \gls{GP} and convex optimization in general in
the context of an aircraft \gls{MDO} problem, but the methods discussed
are general to other engineering design problems which have explicit constraints.

\section{Defining design versus optimization} \label{s:DesVsOpt}

It is difficult to find definitions of design and optimization that
try to identify the similarities and differences between the terms. For us to be
able to understand why \gls{GP}s facilitate design, we have to determine what
features of optimization create barriers to entry for its use in design.

\subsection{What is design?}

In the context of this thesis, I will define design as the following:
To design is to conceive the form and function of something.
In the engineering sense, we can think about the form as the configuration or
the parametrization. The form usually defines $n$, the number of degrees of freedom
of the system, which has a direct effect on the size of the feasibility
space, as well as the complexity of the problem.
On the other hand, the function is the actual purpose of the things
being designed. It is oftentimes the aspect of the design that we can
quantify (i.e. the performance), and has some physics that can be modeled.

An important aspect of design is that it is a process that explores an
n-dimensional feasible space of possible solutions.
We can think about the feasible set of a design as all of the designs
that satisfy the functional requirements. But without a clear method of comparing
the relative performances of designs, the classical
definition of design implies a class of feasibility problems satisfying a set of
constraints that act on the designer's parametrization of the problem.

\subsection{What is optimization?}

In this thesis, I give optimization the following definition: To optimize is to select an
element in a set of feasible solutions with the lowest desired objective
function value. It is also a process, which is sensitive to the elements contained within the set
(related to the form), and the choice of objective function (related to the
function).

\subsection{The fundamental differences}

In many ways, optimization is a natural extension of design, because it allows
for an explicit mathematical representation of the form and function. Both design and
optimization explore feasible and infeasible sets, but differ in a fundamental way.
Design is based on feasibility, whereas optimization is based on optimality.
This observation seems banal, but gives insight as to why there is a barrier
to entry for optimization methods (and especially so for more restrictive forms).
The distinction allows design to be performed
in non-restrictive mathematical forms, since non-linear feasibility problems are
much easier to solve than non-linear optimization problems. Optimization is
done in specific mathematical forms; since most problems of interest are complex,
computational time is a limited resource. These forms can prove
an impediment for designers unfamiliar with optimization to use it.

\section{Unifying design and optimization using GP}

\gls{GP} has developed "in response to a need to solve problems in the actual
world"~\cite{duffingp}. \gls{GP}s and other convex optimization methods have been
in development since the 1960's, but have come into the limelight thanks to the development of
polynomial-time algorithms for convex programming~\cite{interior_point} and
improvements in computing. I do not make
the claim that the form of the \gls{GP} makes it applicable to every design
problem, especially since \gls{GP}s generally require explicit constraints.
Instead, I argue that, for certain kinds of problems, \gls{GP} and convex
optimization naturally integrate into the conceptual design process
for three primary reasons.

\begin{enumerate}

    \item \textit{Inequalities help engineering understanding.}

    The mathematical constraints of \gls{GP} force designers to have a proper grasp
    of the fundamental tradeoffs and pressures in a design.
    Traditionally, physical relations are expressed as equalities. But there is an
    almost-seamless transition from fundamental physics to GP-compatible
    inequalities for certain kinds of problems, and the \gls{GP}-compatible
    form makes boundedness of variables explicit. This understanding of pressure
    and boundedness facilitates the conversion of general physical engineering
    equations into optimization-compatible constraint forms.
    I also demonstrate that the mathematical restrictions of the \gls{GP} can be partially
    overcome through the use of the difference-of-convex
    extension of \gls{GP} called \gls{SP}. \gls{SP}s give us the flexibility to model
    non-log-convex functions, as well as allowing designers to explicitly enforce
    the tightness of
    constraints through the use of signomial equalities when the direction of pressure
    on variables is not clear.

    \item \textit{Models are extensible and modular.}

    Models in \gls{GP} can be made arbitrarily complex. The 'bag of constraints' form of the \gls{GP}
    means that there is no need to reformulate the optimization scheme as more
    constraints are added. This makes incremental modeling improvements straight-forward.
    The traditional engineering design process is split into conceptual, preliminary
    and critical design segments. \gls{GP} modeling facilitates this process by allowing
    ever-increasing levels of complexity.

    Gradient-based optimization methods for
    multimodal, multicomponent systems often involve
    converge loops, as shown in Figure~\ref{f:optflow}, which have to be re-engineered
    when new constraints are introduced. Furthermore, the designer has to tune
    the module for generating new guesses from gradient information, which is unreliable
    at best. \gls{GP}s (and the \gls{GP} approximations
    of \gls{SP}s) are solved all-at-once~\cite{martins_mdo}, which means that there are no constraint
    convergence loops to worry about or parameters to tune. Please refer to \cite{martins_mdo}
    for a more in-depth analysis of various \gls{MDO} architectures.

    \begin{figure*}[!b]
        \begin{subfigure}[b]{0.5\linewidth}
            \begin{center}
                \resizebox{0.75\textwidth}{!}{
                \begin{tikzpicture}[node distance=1.5cm, align=center]
                    \node (start)        [activityStarts]                   {Initialize variables};
                    \node (guess)        [process, below of=start]          {Make a feasible initial guess};
                    \node (evaluate)     [process, below of=guess]          {Evaluate design};
                    \node (gradient)     [process, below of=evaluate]       {Calculate gradients};
                    \node (optimal)      [process, below of=gradient]       {Check optimality condition};
                    \node (solution)     [activityRuns, below of=optimal]   {Solution};
                    \node (genNew)       [process, left of=gradient, xshift=-3cm]        {Generate new guess};

                    \draw[->] (start) -- (guess);
                    \draw[->] (guess) -- (evaluate);
                    \draw[->] (evaluate) -- (gradient);
                    \draw[->] (gradient) -- (optimal);
                    \draw[->] (optimal)  -- (solution);
                    \draw[->] (optimal) -| (genNew);
                    \draw[->]  (genNew) |- (evaluate);
                \end{tikzpicture}}
            \end{center}
            \caption{Gradient-based optimization}
        \end{subfigure}
        \begin{subfigure}[b]{0.5\linewidth}
            \begin{center}
                \resizebox{0.75\textwidth}{!}{
                \begin{tikzpicture}[node distance=1.5cm, align=center, scale=0.5]
                    \node (start)        [activityStarts]               {Initialize variables};
                    \node (guess)        [process, left of=start, xshift=-5cm] {Make initial guess};
                    \node (convexify)    [process, below of=guess]      {Convexify};
                    \node (optimize)     [process, below of=start]  {Optimize convex problem};
                    \node (condition)    [process, below of=optimize]   {Check primal/dual condition};
                    \node (solution)     [activityRuns, below of=condition]   {Solution};
                    \node (sens)         [activityRuns, left of=solution, xshift=-5cm] {Sensitivities};

                    \draw[->] (start) -- node {if DC} (guess);
                    \draw[->] (start) -- (optimize);
                    \draw[->] (guess) -- (convexify);
                    \draw[->] (convexify) -- (optimize);
                    \draw[->] (optimize) -- (condition);
                    \draw[->] (condition) -- node[yshift=-0.75cm,xshift=1cm] {if DC \& reltol $> \epsilon$} (guess);
                    \draw[->] (condition) -- (solution);-
                    \draw[->] (condition) -| (sens);
                    % TODO: learn how to label the 'if DC' section
                \end{tikzpicture}}
            \end{center}
            \caption{Convex, and difference-of-convex (DC) optimization}
        \end{subfigure}
        \caption{The flow diagrams of two methods of optimization. The 'bag of constraints'
        form of the GP facilitates the addition of variables and constraints while extending
        model capabilities, and provides sensitivities to guide modeling efforts.}
        \label{f:optflow}
    \end{figure*}

    A big advantage of convexity is that we can effectively use sensitivity information
    to determine which parts of the
    model yield the greatest returns in terms of fidelity to improved modeling, so engineers can target
    their efforts.

    \item \textit{Models are amenable to mission and multi-point design, and are compatible with modern
    engineering design methodologies.}

    The design tools available in GPkit make it easy to
    implement mission design, and build models that are shared between
    different design problems. Mission design helps engineers gain valuable intuition about
    the tradeoffs in the performance of a design, and multi-point design allows designs to
    be able to fulfill a variety of missions.

\end{enumerate}

In this thesis, I will methodically demonstrate the advantages of \gls{GP} in modeling
and exploring complex engineering trade spaces.



